//------------------------------------------------------------------------------
#include "KBDM9_DDK.h"
#include "USB_MAssStorage.h"
//------------------------------------------------------------------------------
#pragma DATA = USB_MS_XRAM
#pragma CODE = USB_MS_CODE
//------------------------------------------------------------------------------
#if USE_UGP
//------------------------------------------------------------------------------
void ugp_dev_init( void );
int  ugp_dev_write( unsigned long sector, __X void* buf );
int  ugp_dev_read ( unsigned long sector, __X void* buf );
unsigned long ugp_dev_size(void);
//------------------------------------------------------------------------------
int ugp_protect( void )
{
	return 0;
}
//------------------------------------------------------------------------------
int ugp_status( void )
{
	return USB_STORAGE_READY;
}
//------------------------------------------------------------------------------
int ugp_flush(void)
{
	return 0;
}
//------------------------------------------------------------------------------
void MassStorage_ugp_Register(int lun)
{
	USBStorageRegister( lun, ugp_dev_read, ugp_dev_write, ugp_protect, ugp_flush, ugp_dev_size, ugp_status, DIRECT_ACCESS|REMOVABLE, "KB USB20", "UPG Disk  ", "1.00" );
}
//------------------------------------------------------------------------------
void MassStorage_ugp_Loop( void )
{

}
//------------------------------------------------------------------------------
void MassStorage_ugp_Init( void )
{
	ugp_dev_init();
}
//------------------------------------------------------------------------------
const unsigned char ugp_root_sec[] = {
	'C','W',' ',' ',' ',' ',' ',' ','I','N','I', 0x26, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00,
	'C','R',' ',' ',' ',' ',' ',' ','I','N','I', 0x26, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x02, 0x00, 0x00,
	'D','W',' ',' ',' ',' ',' ',' ','I','N','I', 0x26, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0xf8, 0x0f, 0x00,
	'D','R',' ',' ',' ',' ',' ',' ','I','N','I', 0x26, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x10, 0x00,
};
//------------------------------------------------------------------------------
int user_command( __X void* buf )
{
	return 0;
}
//------------------------------------------------------------------------------
int user_respond( __X void* buf )
{
	return 0;
}
//------------------------------------------------------------------------------
void user_write( __X void* buf )
{

}
//------------------------------------------------------------------------------
void user_read( __X void* buf )
{

}
//------------------------------------------------------------------------------
#endif
//------------------------------------------------------------------------------
